<div class='user-show-page'>
  <div class="top-bar mt-2 mb-5">
    <%= image_tag @user.avatar.attached? ? @user.avatar : "photo.png", alt: "alttext", class: 'avatar mr-3' %>
    <div class="user-info">
      <h5>@<%= @user.username %></h5>
      <p><%= current_user.outfits.length %> outfits completed</p>
    </div>
  </div>
  <div class="fcen">
    <div class='blue-btn special' data-toggle="modal" data-target="#exampleModal">
      UPLOAD NEW OUTFIT
    </div>
  </div>
  <div class="mb-5"></div>

  <div class="border-top">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item col-6">
        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">
        <%= image_tag 'history.png' %></a>
      </li>
      <li class="nav-item col-6">
        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">
        <%= image_tag 'heart.png' %></a>
        <!-- wishlist - only auto generated in next project phase - atm placeholder -->
      </li>
    </ul>
  </div>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">

      <div class='container pbbig mt-2'>
        <% current_user.outfits.each do |outfit| %>
          <%= link_to outfit_path(outfit), class:'show-link' do %>
          <div class='outfit-user-card'>
            <div class="outfit-photo h100" style="background-image: url('<%= outfit.photo.attached? ? cl_image_path(outfit.photo.key) : 'photo.png' %>');">
            </div>
            <div>
              <p class='outfit-user-time'>Event date: <%= outfit.event_date&.strftime("%a %d %b %y, %l:%M %p") || "has not been set" %></p>
            </div>
          </div>
          <% end %>
        <% end %>
      </div>
    </div>

  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">Wishlist</div>

  </div>
</div>

<!-- modal -->

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">New outfit</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <%= render "outfits/form", outfit: @new_outfit, user: current_user %>
      </div>
    </div>
  </div>
</div>
